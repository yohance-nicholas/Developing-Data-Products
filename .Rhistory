pop_65_over_2018 = SP.POP.65UP.TO.ZS)
# Merge COVID-19 Confirmed Cases and World Bank Data and Filter CARICOM Countries
covid_caricom <- covid_19_confirmed_and_deaths %>%
filter(country == "Antigua and Barbuda"|
country == "Bahamas"|
country == "Barbados"|
country == "Belize" |
country == "Dominica"|
country == "Grenada"|
country == "Guyana"|
country == "Haiti"|
country == "Jamaica"|
country == "Montserrat"|
country == "Saint Kitts and Nevis"|
country == "Saint Lucia"|
country == "Saint Vincent and the Grenadines"|
country == "Suriname"|
country == "Trinidad and Tobago") %>%
left_join(wb_data,
by = 'iso3c')
View(covid_caricom)
# Merge COVID-19 Confirmed Cases and World Bank Data and Filter CARICOM Countries
covid_caricom <- covid_19_confirmed_and_deaths %>%
filter(country == "Antigua and Barbuda"|
country == "Bahamas"|
country == "Barbados"|
country == "Belize" |
country == "Dominica"|
country == "Grenada"|
country == "Guyana"|
country == "Haiti"|
country == "Jamaica"|
country == "Montserrat"|
country == "Saint Kitts and Nevis"|
country == "Saint Lucia"|
country == "Saint Vincent and the Grenadines"|
country == "Suriname"|
country == "Trinidad and Tobago") %>%
left_join(wb_data,
by = 'iso3c') %>%
mutate(confirmed_per_100k = confirmed/pop_2018*100000,
deaths_per_100k = deaths/pop_2018*100000)
View(covid_caricom)
wb_data <- wb(indicator = series,
mrv = 1) %>%
select(iso3c, value, indicatorID) %>%
spread(indicatorID, value) %>%
rename(gdp_capita_2018 = NY.GDP.PCAP.KD,
pop_2018 = SP.POP.TOTL,
pop_0_14_2018 = SP.POP.0014.FE.ZS,
pop_15_64_2018 = SP.POP.1564.TO.ZS,
pop_65_over_2018 = SP.POP.65UP.TO.ZS) %>%
drop_na()
View(wb_data)
# Merge COVID-19 Confirmed Cases and World Bank Data and Filter CARICOM Countries
covid_caricom <- covid_19_confirmed_and_deaths %>%
filter(country == "Antigua and Barbuda"|
country == "Bahamas"|
country == "Barbados"|
country == "Belize" |
country == "Dominica"|
country == "Grenada"|
country == "Guyana"|
country == "Haiti"|
country == "Jamaica"|
country == "Montserrat"|
country == "Saint Kitts and Nevis"|
country == "Saint Lucia"|
country == "Saint Vincent and the Grenadines"|
country == "Suriname"|
country == "Trinidad and Tobago") %>%
left_join(wb_data,
by = 'iso3c') %>%
mutate(confirmed_per_100k = confirmed/pop_2018*100000,
deaths_per_100k = deaths/pop_2018*100000)
View(covid_caricom)
install.packages("jsonlite")
library(jsonlite)
tt <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/TT/mobility.json")
View(tt)
wb_countries <- wbcountries()
library(wbstats)
wb_countries <- wbcountries()
View(wb_countries)
# CARICOM COVID-19 Cases Data Cleaning Script
# Cross-Sectional Dataset of Most Recent Data
# Prepared by Yohance Nicholas
# April 8th 2020
### Rationale
# The Coronavirus disease 2019 (COVID-19) is an infectious disease caused by
# severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2). The disease was
# first identified in December 2019 in Wuhan, the capital of China's Hubei
# province, and has since spread globally, resulting in the ongoing 2019â20
# coronavirus pandemic. For this coursework project, I have opted to use Leaflet
# to map the incidence of the Novel Coronavirus among [CARICOM Member
# States](https://caricom.org/member-states-and-associate-members/). All CARICOM
# countries are classified as developing countries. They are all relatively
# small in terms of population and size, and diverse in terms of geography and
# population, culture and levels of economic and social development.  While the
# pandemic was slow to reach the CARICOM region, the begining of March saw the
# onset of the pandemic among CARICOM member states.
# Import Required Data ----------------------------------------------------
# Import most recent COVID-19 Confirmed Cases and Deaths
library(readr)
library(tidyverse)
library(tidyselect)
library(countrycode)
# Total Confirmed Cases
covid_19_confirmed <- tbl_df(read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv", col_types = cols()))
covid_19_confirmed <- covid_19_confirmed %>%
select('Country/Region', Lat, Long, last_col()) %>%
rename(country = 'Country/Region',
lat = Lat,
lng = Long,
confirmed = last_col()) %>%
mutate(iso3c = countrycode(country,
origin = "country.name",
destination = "iso3c"))
# Total Deaths
covid_19_deaths <- tbl_df(read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv", col_types = cols()))
covid_19_deaths <- covid_19_deaths %>%
select('Country/Region', last_col()) %>%
rename(country = 'Country/Region',
deaths = last_col()) %>%
mutate(iso3c = countrycode(country,
origin = "country.name",
destination = "iso3c")) %>%
select(-country)
covid_19_confirmed_and_deaths <- covid_19_confirmed %>%
left_join(covid_19_deaths,
by = 'iso3c') %>%
select(-iso3c,iso3c)
# Import Relevant Socio-Economic Data from the World Development Indicators Database
library(wbstats)
series <- c("NY.GDP.PCAP.KD", "SP.POP.TOTL", "SP.POP.0014.TO.ZS", "SP.POP.1564.TO.ZS", "SP.POP.65UP.TO.ZS", "AG.LND.TOTL.K2",
"EN.POP.DNST", "EN.URB.LCTY", "SP.DYN.LE00.IN")
wb_data <- wb(indicator = series,
mrv = 1) %>%
select(iso3c, value, indicatorID) %>%
spread(indicatorID, value) %>%
rename(gdp_capita_2018 = NY.GDP.PCAP.KD,
pop_2018 = SP.POP.TOTL,
pop_0_14_2018 = SP.POP.0014.TO.ZS,
pop_15_64_2018 = SP.POP.1564.TO.ZS,
pop_65_over_2018 = SP.POP.65UP.TO.ZS,
land_area = AG.LND.TOTL.K2,
pop_density = EN.POP.DNST,
pop_largest_city = EN.URB.LCTY,
life_expectancy = SP.DYN.LE00.IN)
wb_countries <- wbcountries() %>%
select(iso3c,
iso2c,
region,
incomeID,
income)
wb_data <- wb_data %>%  left_join(wb_countries,
by = "iso3c")
View(wb_data)
# Merge COVID-19 Confirmed Cases, World Bank Data and Filter CARICOM Countries
caricom_covid <- covid_19_confirmed_and_deaths %>%
filter(country == "Antigua and Barbuda"|
country == "Bahamas"|
country == "Barbados"|
country == "Belize" |
country == "Dominica"|
country == "Grenada"|
country == "Guyana"|
country == "Haiti"|
country == "Jamaica"|
country == "Montserrat"|
country == "Saint Kitts and Nevis"|
country == "Saint Lucia"|
country == "Saint Vincent and the Grenadines"|
country == "Suriname"|
country == "Trinidad and Tobago") %>%
left_join(wb_data,
by = 'iso3c') %>%
mutate(lat = if_else(country == "Belize", 17.1899, lat),
lng = if_else(country == "Belize", -88.4976, lng),
confirmed_per_100k = confirmed/pop_2018*100000,
deaths_per_100k = deaths/pop_2018*100000,
mortality_rate = deaths/confirmed*100)
View(caricom_covid)
caricom_countries <- list(caricom_covid$iso2c)
View(caricom_countries)
caricom_countries[[1]]
# Merge COVID-19 Confirmed Cases, World Bank Data and Filter CARICOM Countries
caricom_covid <- covid_19_confirmed_and_deaths %>%
filter(country == "Antigua and Barbuda"|
country == "Bahamas"|
country == "Barbados"|
country == "Belize" |
country == "Dominica"|
country == "Grenada"|
country == "Guyana"|
country == "Haiti"|
country == "Jamaica"|
country == "Montserrat"|
country == "Saint Kitts and Nevis"|
country == "Saint Lucia"|
country == "Saint Vincent and the Grenadines"|
country == "Suriname"|
country == "Trinidad and Tobago") %>%
arrange() %>%
left_join(wb_data,
by = 'iso3c') %>%
mutate(lat = if_else(country == "Belize", 17.1899, lat),
lng = if_else(country == "Belize", -88.4976, lng),
confirmed_per_100k = confirmed/pop_2018*100000,
deaths_per_100k = deaths/pop_2018*100000,
mortality_rate = deaths/confirmed*100)
View(caricom_covid)
# Merge COVID-19 Confirmed Cases, World Bank Data and Filter CARICOM Countries
caricom_covid <- covid_19_confirmed_and_deaths %>%
filter(country == "Antigua and Barbuda"|
country == "Bahamas"|
country == "Barbados"|
country == "Belize" |
country == "Dominica"|
country == "Grenada"|
country == "Guyana"|
country == "Haiti"|
country == "Jamaica"|
country == "Montserrat"|
country == "Saint Kitts and Nevis"|
country == "Saint Lucia"|
country == "Saint Vincent and the Grenadines"|
country == "Suriname"|
country == "Trinidad and Tobago") %>%
arrange(country) %>%
left_join(wb_data,
by = 'iso3c') %>%
mutate(lat = if_else(country == "Belize", 17.1899, lat),
lng = if_else(country == "Belize", -88.4976, lng),
confirmed_per_100k = confirmed/pop_2018*100000,
deaths_per_100k = deaths/pop_2018*100000,
mortality_rate = deaths/confirmed*100)
View(caricom_covid)
caricom_countries <- list(caricom_covid$iso2c)
caricom_countries
View(caricom_countries)
View(caricom_covid)
caricom_covid$iso2c
kable(caricom_covid$iso2c)
library(broom)
kable(caricom_covid$iso2c)
iso2c <- caricom_covid$iso2c
iso2c
# Export Clean Dataset
write.csv(caricom_covid, sprintf("caricom_covid_data_cs_%s.csv", Sys.Date()))
# CARICOM COVID-19 Cases Data Cleaning Script
# Cross-Sectional Dataset of Most Recent Data
# Prepared by Yohance Nicholas
# April 8th 2020
### Rationale
# The Coronavirus disease 2019 (COVID-19) is an infectious disease caused by
# severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2). The disease was
# first identified in December 2019 in Wuhan, the capital of China's Hubei
# province, and has since spread globally, resulting in the ongoing 2019â20
# coronavirus pandemic. For this coursework project, I have opted to use Leaflet
# to map the incidence of the Novel Coronavirus among [CARICOM Member
# States](https://caricom.org/member-states-and-associate-members/). All CARICOM
# countries are classified as developing countries. They are all relatively
# small in terms of population and size, and diverse in terms of geography and
# population, culture and levels of economic and social development.  While the
# pandemic was slow to reach the CARICOM region, the begining of March saw the
# onset of the pandemic among CARICOM member states.
# Import Required Data ----------------------------------------------------
# Import most recent COVID-19 Confirmed Cases and Deaths
library(readr)
library(tidyverse)
library(tidyselect)
library(countrycode)
# Total Confirmed Cases
covid_19_confirmed <- tbl_df(read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv", col_types = cols()))
covid_19_confirmed <- covid_19_confirmed %>%
select('Country/Region', Lat, Long, last_col()) %>%
rename(country = 'Country/Region',
lat = Lat,
lng = Long,
confirmed = last_col()) %>%
mutate(iso3c = countrycode(country,
origin = "country.name",
destination = "iso3c"))
# Total Deaths
covid_19_deaths <- tbl_df(read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv", col_types = cols()))
covid_19_deaths <- covid_19_deaths %>%
select('Country/Region', last_col()) %>%
rename(country = 'Country/Region',
deaths = last_col()) %>%
mutate(iso3c = countrycode(country,
origin = "country.name",
destination = "iso3c")) %>%
select(-country)
covid_19_confirmed_and_deaths <- covid_19_confirmed %>%
left_join(covid_19_deaths,
by = 'iso3c') %>%
select(-iso3c,iso3c)
# Import Relevant Socio-Economic Data from the World Development Indicators Database
library(wbstats)
series <- c("NY.GDP.PCAP.KD", "SP.POP.TOTL", "SP.POP.0014.TO.ZS", "SP.POP.1564.TO.ZS", "SP.POP.65UP.TO.ZS", "AG.LND.TOTL.K2",
"EN.POP.DNST", "EN.URB.LCTY", "SP.DYN.LE00.IN")
wb_data <- wb(indicator = series,
mrv = 1) %>%
select(iso3c, value, indicatorID) %>%
spread(indicatorID, value) %>%
rename(gdp_capita_2018 = NY.GDP.PCAP.KD,
pop_2018 = SP.POP.TOTL,
pop_0_14_2018 = SP.POP.0014.TO.ZS,
pop_15_64_2018 = SP.POP.1564.TO.ZS,
pop_65_over_2018 = SP.POP.65UP.TO.ZS,
land_area = AG.LND.TOTL.K2,
pop_density = EN.POP.DNST,
pop_largest_city = EN.URB.LCTY,
life_expectancy = SP.DYN.LE00.IN)
wb_countries <- wbcountries() %>%
select(iso3c,
iso2c,
region,
incomeID,
income)
wb_data <- wb_data %>%  left_join(wb_countries,
by = "iso3c")
### Merging the COVID-19 cases with the World Bank Data
# Now that both dataframes have been generated, I proceed to merge the two and
# select CARICOM member states for mapping. In order to facilitate the analysis
# of the severity of the pandemic country by country, three new variables will
# be generated:
# * Confirmed Cases per 100,000
# * Deaths per 100,000
# * Mortality Rate
# Merge COVID-19 Confirmed Cases, World Bank Data and Filter CARICOM Countries
caricom_covid <- covid_19_confirmed_and_deaths %>%
filter(country == "Antigua and Barbuda"|
country == "Bahamas"|
country == "Barbados"|
country == "Belize" |
country == "Dominica"|
country == "Grenada"|
country == "Guyana"|
country == "Haiti"|
country == "Jamaica"|
country == "Montserrat"|
country == "Saint Kitts and Nevis"|
country == "Saint Lucia"|
country == "Saint Vincent and the Grenadines"|
country == "Suriname"|
country == "Trinidad and Tobago") %>%
arrange(country) %>%
left_join(wb_data,
by = 'iso3c') %>%
mutate(lat = if_else(country == "Belize", 17.1899, lat),
lng = if_else(country == "Belize", -88.4976, lng),
confirmed_per_100k = confirmed/pop_2018*100000,
deaths_per_100k = deaths/pop_2018*100000,
mortality_rate = deaths/confirmed*100)
# Export Clean Dataset
write.csv(caricom_covid, sprintf("caricom_covid_data_cs_%s.csv", Sys.Date()))
tt <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/TT/mobility.json")
tt <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/TT/mobility.json")caricom_countries <- list(caricom_covid$iso2c)
caricom_countries[[1]]
# Export Clean Dataset
write.csv(caricom_covid, sprintf("caricom_covid_data_cs_%s.csv", Sys.Date()))
library(jsonlite)
AG <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/AG/mobility.json")
BS <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/BS/mobility.json")
BB <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/BB/mobility.json")
BZ <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/BZ/mobility.json")
DM <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/DM/mobility.json")
GD <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/GD/mobility.json")
GY <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/GY/mobility.json")
HT <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/HT/mobility.json")
JM <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/JM/mobility.json")
KN <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/KN/mobility.json")
LC <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/LC/mobility.json")
VC <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/VC/mobility.json")
SR <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/SR/mobility.json")
TT <- fromJSON("https://raw.githubusercontent.com/pastelsky/covid-19-mobility-tracker/master/output/TT/mobility.json")
View(BS)
shiny::runApp('Shiny_App')
runApp('Shiny_App')
runApp('C:/Users/Yohance Nicholas/Desktop/3. Shiny Application')
runApp('C:/Users/Yohance Nicholas/Desktop/3. Shiny Application')
library(flexdashboard)
source("https://git.io/Jfqjv", local = T)
world_today <- tidycovid19 %>%
filter(date == max(date))
source('~/GitHub/Developing-Data-Products/0. Data Cleaning Scripts/0_tidycovid19_caricom_local.R')
install.packages(c("backports", "dbplyr", "gss", "haven", "httpuv"))
tidycovid19_cases <- tidycovid19 %>%
select(iso3c,
country,
date,
confirmed,
deaths,
recovered) %>%
mutate(active = confirmed - deaths - recovered) %>%
select(-confirmed) %>%
gather(cases, value, deaths, recovered, active)
# CARICOM Covid Data Cleaning Script
# Prepared by Yohance Nicholas
# Version: May 22nd 2020
library(tidyverse)
library(tsibble)
library(tidyr)
library(sjmisc)
tidycovid19 <- readRDS(gzcon(url("https://git.io/JfYa7")))%>%
drop_na(confirmed)
tidycovid19_cases <- tidycovid19 %>%
select(iso3c,
country,
date,
confirmed,
deaths,
recovered) %>%
mutate(active = confirmed - deaths - recovered) %>%
select(-confirmed) %>%
gather(cases, value, deaths, recovered, active)
# Add Spatial Coordinates
library(wbstats)
series <- c("ST.INT.ARVL","SP.POP.0014.TO.ZS", "SP.POP.1564.TO.ZS", "SP.POP.65UP.TO.ZS", "SH.STA.DIAB.ZS", "SH.DTH.NCOM.ZS", "SH.DYN.NCOM.ZS")
wb_data <- wb(indicator = series,
mrv = 1) %>%
select(iso3c, value, indicatorID) %>%
spread(indicatorID, value) %>%
rename(tourist_arrivals = ST.INT.ARVL,
pop_0_14_2018 = SP.POP.0014.TO.ZS,
pop_15_64_2018 = SP.POP.1564.TO.ZS,
pop_65_over_2018 = SP.POP.65UP.TO.ZS,
diabetes_20_79 = SH.STA.DIAB.ZS,
death_by_ncd = SH.DTH.NCOM.ZS,
death_by_cvd_ca_dm_30_70 = SH.DYN.NCOM.ZS)
wb_countries <- wbcountries() %>%
select(iso3c,
lat,
long)
wb_data <- wb_data %>%  left_join(wb_countries,
by = "iso3c")
tidycovid19 <- tidycovid19 %>%  left_join(wb_data,
by = "iso3c")%>%
mutate(active = confirmed - deaths - recovered,
confirmed_logratio = difference(log(confirmed)),
confirmed_per_100k = confirmed/population*100000,
deaths_per_100k = deaths/population*100000,
mortality_rate = deaths/confirmed*100,
recovery_rate = recovered/confirmed*100)
# Create Dummy Variables
tidycovid19 <- tidycovid19 %>%
select(region, income) %>%
to_dummy(region, income) %>%
bind_cols(tidycovid19) %>%
select(-contains("region"), contains("region")) %>%
select(-contains("income"), contains("income"))
# Create Aggregate Variables
commodity <- c("GUY", "JAM", "TTO") # To create variable which identifies type of economy
oecs <- c("ATG", "DMA", "GRD", "KNA", "LCA", "VCT") # To create variable which identifies OECS Member States
caricom <- c("ATG","BHS","BLZ","BRB","DMA","GRD","GUY","HTI","JAM","KNA","LCA","SUR","TTO","VCT") # To create variable which identifies CARICOM Member States
# Create Filtered Dataset
caricom_tidycovid19 <- tidycovid19 %>%
filter(iso3c %in% caricom) %>%
mutate(economy = if_else(iso3c %in% commodity, "Commodity Based", "Service Based" ),
oecs = if_else(iso3c %in% oecs, "OECS Member State", "Non-OECS Member State" ),
lat = ifelse(iso3c == "DMA", 15.41500, lat),
long = ifelse(iso3c == "DMA", -61.3710, long),
lat = ifelse(iso3c == "KNA", 17.35782, lat),
long = ifelse(iso3c == "KNA", -62.7830, long),
lat = as.numeric(lat),
long = as.numeric(long)) %>%
mutate_at(35:37, round, 2) %>%
rename(lng = long)%>%
filter(date >= as.Date("2020-03-07"))
caricom_tidycovid19_cases <- tidycovid19_cases %>%
filter(iso3c %in% caricom)
caricom_today <- caricom_tidycovid19 %>%
filter(date == max(date))
world_today <- tidycovid19 %>%
filter(date == max(date))
caricom <- caricom_today %>% pull(iso3c)
by_economy_type <- group_by(caricom_today, economy)
by_income <- group_by(caricom_today, income)
by_oecs <- group_by(caricom_today, oecs)
caricom_today %>%
filter(date == max(date)) %>%
group_by(`iso3c`) %>%
summarise(value = sum(confirmed, na.rm = T))
caricom_today %>%
filter(date == max(date))  %>%
summarise(value = sum(confirmed, na.rm = T))
caricom_today %>%
filter(date == max(date))  %>%
summarise(total_confirmed = sum(confirmed, na.rm = T),
total_deaths = sum(deaths, na.rm = T))
View(caricom_today)
caricom_today   %>%
summarise(total_confirmed = sum(confirmed, na.rm = T),
total_deaths = sum(deaths, na.rm = T))
caricom_today   %>%
summarise(total_confirmed = sum(confirmed, na.rm = T),
total_deaths = sum(deaths, na.rm = T))
caricom_tidycovid19  %>%
summarise(total_confirmed = sum(confirmed, na.rm = T),
total_deaths = sum(deaths, na.rm = T))
caricom_today %>%
filter(date == max(date))  %>%
summarise(total_confirmed = sum(confirmed, na.rm = T),
total_deaths = sum(deaths, na.rm = T),
total_recovered = sum(recovered, na.rm = T))
View(tidycovid19_cases)
View(caricom_tidycovid19_cases)
source('~/GitHub/Developing-Data-Products/0. Data Cleaning Scripts/0_tidycovid19_caricom_all.R')
source('~/GitHub/Developing-Data-Products/0. Data Cleaning Scripts/0_tidycovid19_caricom_all.R')
source('~/GitHub/Developing-Data-Products/0. Data Cleaning Scripts/0_tidycovid19_caricom_local.R')
